{% extends "base.html" %}

{% load i18n %}
{% load static %}
{% load iasp_tags %}


{% block top_buttons %}
<a href="{% url 'generics:home' %}" class="btn btn-outline-secondary">
    <svg class="icon icon-sm">
        <use href="{% static 'svg/sprites.svg' %}#it-arrow-left"></use>
    </svg> {% trans "Home" %}
</a>
{% endblock top_buttons %}

{% block clean_content %}
{% get_current_language as LANGUAGE_CODE %}
<div class="mb-4">
    <p class="h3">
        {% trans "Active calls" %} {% trans "for all degree courses" %}
    </p>
</div>

{% if calls %}
<div class="table-responsive">
    <table class="table table-striped table-hover table-bordered">
        <thead>
          <tr>
            <th scope="col">{% trans "Name" %}</th>
            <th scope="col" class="text-end">{% trans "Cohort" %}</th>
            <th scope="col" class="text-end">{% trans "Year" %}</th>
            <th scope="col" class="text-end">{% trans "Places available" %}</th>
            <th scope="col" class="text-end">{% trans "Credits threshold" %}</th>
            <th scope="col" class="text-end">{% trans "URL" %}</th>
            <th scope="col" class="text-end">{% trans "Expiration" %}</th>
            <th scope="col" class="text-end"></th>
          </tr>
        </thead>
        <tbody>
            {% for call in calls %}
            <tr>
                <td>
                    {% if LANGUAGE_CODE == 'it' %}
                        {{ call.title_it }}
                    {% else %}
                        {{ call.title_en }}
                    {% endif %}
                </td>
                <td class="text-end">{{ call.course_cohort }}/{{ call.course_cohort|add:1 }}</td>
                <td class="text-end">{{ call.course_year }}Â°</td>
                <td class="text-end">{{ call.places_available }}</td>
                <td class="text-end">{{ call.credits_threshold }}</td>
                <td class="text-end">
                    {% if call.url %}
                    <a href="{{ call.url }}" target="_blank">
                        <svg class="icon icon-xs">
                            <use href="{% static 'svg/sprites.svg' %}#it-link"></use>
                        </svg>
                    </a>
                    {% else %}
                    -
                    {% endif %}
                </td>
                <td class="text-end">{{ call.end }}</td>
                <td class="text-end">
                    <a href="{% url 'calls:call' pk=call.pk %}" class="btn btn-primary btn-xs">
                        {% trans "Details" %}
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
{% trans "No active calls here" %}
{% endif %}
{% endblock clean_content %}
